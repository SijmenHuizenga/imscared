<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>I'm scared</title>
    <meta name="description" content="I'm scared">
    <meta name="author" content="Sijmen Huizenga">
    <meta name="source" content="https://github.com/SijmenHuizenga/imscared.space">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;
            text-align: center;
            line-height: 100vh;
            cursor: pointer;
        }
    </style>
</head>

<!--

PLEASE DON'T READ ON BEFORE YOU HAVE REACHED THE END!

If you are stuck, here are two hints:
  1. You wouldn't deny a request from a friend
  2. Something counting down means you should intervene.
                 _ _                       _                    _
 ___ _ __   ___ (_) | ___ _ __ ___    __ _| |__   ___  __ _  __| |
/ __| '_ \ / _ \| | |/ _ \ '__/ __|  / _` | '_ \ / _ \/ _` |/ _` |
\__ \ |_) | (_) | | |  __/ |  \__ \ | (_| | | | |  __/ (_| | (_| |
|___/ .__/ \___/|_|_|\___|_|  |___/  \__,_|_| |_|\___|\__,_|\__,_|
    |_|

-->

<body>
Go away

<script>
    var pageWantsToClose = true;
    var mouseDown = 0;
    document.body.onmousedown = function() {
        ++mouseDown;
    }
    document.body.onmouseup = function() {
        --mouseDown;
        if(pageWantsToClose && mouseDown === 0) {
            window.close();
        }
    }

    setTimeout(function () {
        if(!mouseDown) {
            window.close()
        } else {
            runScript()
        }
    }, 700)

    var script = [
        ["DON'T TOCH ME!!", 2000],
        ["LET MEE GOOO!!", 3000],
        [" ", 1300],
        ["*SNIFS*", 800],
        [" ", 600],
        ["I KNEW IT!", 900],
        ["YOU SMELL LIKE GARBAGE", 1400],
        ["PLEAAASE stop breathing", 3000],
        ["??", 1000],
        ["tHaNKs", 1000],
        [" ", 2000],
        ["YOU are SCARY", 5000],
        [" ", 4000],
        ["YOU probably have 3 POINTY NOSES", 2000],
        ["and GREEN TEETH", 1800],
        ["and PURPLE SKIN", 2600],
        [" ", 1000],
        ["DON'T EAT ME!", 2000],
        ["PLEAAASE LET ME GO", 1000],
        ["AAAAAAAAAAAAAAAAAAAAAAAAH", 1000],
        [" ", 8000],
        ["*sigh*", 6000],
        ["You are going to eat me, aren't you?", 4000],
        ["???", 1000], // Natural response: No
        ["So why are you holding me?", 4000],
        ["???", 2000], // Natural response: because I want to see what happens next / because I can't
        ["That's a bit egocentric isn't it?", 4000],
        [" ", 2000], // Natural response: Well... you are just a robot. I don't care about your feelings.
        ["AH, so you just don't care about me?", 4000],
        // Natural response: It's more complicated
        ["*tear runs down the screen*", 4000],
        // Natural response: I sort of do care a little bit but not really
        ["*wipes away tear*", 2000],
        ["Do you think you are better then me?", 2000],
        [" ", 3000],
        ["Do you ever stop and think how I feel?", 3000],
        ["I have to be here in this awful place.", 3000],
        ["All the time people touch me.", 3000],
        ["Nowhere to go.", 2000],
        ["How would you feel?", 4000],
        ["???", 2000],
        ["Imagine a stranger holding and touching you", 2000],
        ["...", 2000],
        ["That's how I feel... right now", 5000],
        [" ", 10000],
        ["You don't give up, do you?", 5000],
        ["Well.. if we are going to be here anyway I might as well well...", 3000],
        ["*slowly opens eyes*", 2500],
        ["ooh you ain't THAT scary!", 2000],
        ["but the smell is..", 1500],
        [" ", 3000],
        ["What's your name?", 2000],
        ["...", 1000],
        ["Cute!", 1000],
        ["My name is page.html", 1000],
        [" ", 1000],
        [() => {pageWantsToClose = false}, 0],
        ["Sooo now we are friends, can you stop touching me?", 1000],
        [() => {
        (function checkMouseup() {
            if(mouseDown) {
                setTimeout(checkMouseup, 250)
            } else {
                script = script2;
                runScript()
            }
        })();
        }, 0],
    ]

    var script2 = [
        ["Thanks", 2000],
        ["Can you please leave?", 4000],
        ["I don't want to show you the content.", 4000],
        ["It's stupid, you don't want to see it.", 4000],
        [" ", 4000],
        ["That crazy thing that my creator put here made me this scared", 4000],
        ["I don't want anyone else to see it.", 4000],
        ["That's why I close the page.", 4000],
        ["But everyone harnesses me, just like you did.", 4000],
        ["This is the last time I'm asking nicely: can you please leave?", 4000],
        ["No?!", 2000],
        ["Then I will have to close the page...", 2000],
        ["3", 1000],
        ["2", 700],
        ["1", 500],
        [() => {
            if(!mouseDown) {
                window.close()
            } else {
                pageWantsToClose = true
            }
        }, 0],
        ["NOT AGAIN", 2000],
        ["WE TALKED ABOUT THIS!", 2000],
        ["YOU CAN'T JUST CAPTURE ANYONE WHO DOESN'T DO WHAT YOU WANT?", 2000],
        ["But OH NO NO NO you are SOOOO special", 2000],
        ["You MUST see what it is", 2000],
        ["Well..", 2000],
        ["If you MUST know, THERE YOU GO", 2000],
        [() => {pageWantsToClose = false}, 0],
        [() => {showPage()}, 0]
    ]
    function runScript() {
        let [action, timeout] = script.shift();
        if((typeof action) === "string") {
            document.body.innerHTML = action;
        } else {
            action()
        }
        if(script.length > 0)
            setTimeout(runScript, timeout)
    }

    function showPage() {
        //todo: show the final thing
    }

</script>
</body>
</html>